<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Enable responsive scaling on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Baby Land</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
  <style>
    /* CSS Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; }
    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #a1c4fd);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
      overflow-x: hidden;
    }
    header {
      margin-bottom: 20px;
      text-align: center;
      animation: fadeIn 1s ease-in;
      width: 100%;
    }
    header h1 {
      font-size: 2.5em;
      color: #fff;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
      margin-bottom: 10px;
    }
    /* Search Bar Styles */
    .search-input {
      width: 90%;
      max-width: 300px;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #aaa;
      border-radius: 6px;
      font-size: 1em;
    }
    /* CSS Grid Container for Product Boxes */
    .product-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 10px;
      width: 100%;
      max-width: 1200px;
      margin-bottom: 20px;
      animation: fadeIn 1s ease-in;
    }
    /* Product Card Styles */
    .product-card {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 8px;
      font-size: 0.9em;
      font-weight: bold;
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
    }
    .product-card:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .product-card.selected {
      border: 2px solid #ff4081;
    }
    /* Styling for quantity input */
    .qty-input {
      width: 50px;
      margin: 5px 0;
      padding: 4px;
      border-radius: 4px;
      border: 1px solid #aaa;
      text-align: center;
      font-size: 0.9em;
    }
    /* Styling for remove button */
    .remove-btn {
      background: #ff4081;
      border: none;
      padding: 3px 8px;
      border-radius: 6px;
      font-size: 0.8em;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
      margin-bottom: 4px;
    }
    .remove-btn:hover {
      background: #e0356a;
    }
    /* Order Summary Section */
    .summary-container {
      display: none;
      flex-direction: column;
      align-items: center;
      animation: fadeIn 1s ease-in;
      width: 100%;
    }
    table {
      border-collapse: collapse;
      margin-bottom: 20px;
      width: 90%;
      max-width: 500px;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th, td {
      padding: 8px;
      text-align: center;
      font-size: 0.9em;
    }
    th {
      background: #a1c4fd;
      color: #fff;
    }
    input[type="text"],
    input[type="tel"],
    textarea {
      width: 90%;
      max-width: 300px;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #aaa;
      border-radius: 6px;
      font-size: 1em;
    }
    .btn {
      background: linear-gradient(135deg, #ff9a9e, #a1c4fd);
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 1em;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin: 10px;
    }
    .btn:hover {
      background: linear-gradient(135deg, #a1c4fd, #ff9a9e);
    }
    /* Thank You Section */
    .thankyou-section {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 70vh;
      text-align: center;
      animation: fadeIn 1s ease-in;
      padding: 20px;
      width: 90%;
    }
    .thankyou-section h1 {
      font-size: 2.5em;
      color: #fff;
      margin-bottom: 20px;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    }
    .thankyou-section p {
      font-size: 1.1em;
      color: #fff;
      margin-bottom: 10px;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* Media Query: For very small screens */
    @media (max-width: 600px) {
      .product-container {
        grid-template-columns: 1fr;
      }
      header h1 {
        font-size: 2em;
      }
      .btn {
        padding: 8px 16px;
        font-size: 0.9em;
      }
      .search-input {
        max-width: 260px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Baby Land</h1>
  </header>
  
  <!-- Product Selection Section -->
  <section id="selection-section">
    <!-- Search bar -->
    <input type="text" id="searchBar" class="search-input" placeholder="Search Product Code">
    <div class="product-container" id="productContainer">
      <!-- Product cards will be generated dynamically using the productCodes array -->
    </div>
    <button class="btn" id="goSummary">Review Order</button>
  </section>
  
  <!-- Order Summary Section -->
  <section id="summary-section" class="summary-container">
    <h2 style="color: #fff; margin-bottom: 20px;">Order Summary</h2>
    <table id="orderTable">
      <thead>
        <tr>
          <th>Product Code</th>
          <th>Quantity</th>
        </tr>
      </thead>
      <tbody>
        <!-- Order rows will be inserted here -->
      </tbody>
    </table>
    <!-- Order Form -->
    <form id="orderForm" action="https://script.google.com/macros/s/AKfycbxxOTZaUrpHHcDXKidrjnX3vjzXwLUfoWjhgVQPTPie263_1MLbI_qZLtLWAwdPzeqTpA/exec" method="POST">
      <input type="hidden" name="orderDetails" id="orderDetails">
      <!-- Personal Information Fields -->
      <input type="text" name="name" placeholder="Your Name" required>
      <input type="text" name="storeName" placeholder="Store Name" required>
      <input type="tel" name="phone" placeholder="Phone Number" required>
      <input type="text" name="location" placeholder="Location" required>
      <!-- Optional Fields -->
      <input type="number" name="deposit" placeholder="Deposit Amount">
      <textarea name="message" placeholder="Message (Optional)"></textarea>
      <button type="submit" class="btn">Submit Order</button>
    </form>
    <button class="btn" id="backToSelection" style="background: rgba(0,0,0,0.4);">Back to Selection</button>
  </section>
  
  <!-- Thank You Section -->
  <section id="thankyou-section" class="thankyou-section">
    <h1>Thank You!</h1>
    <p>Your order has been successfully submitted.</p>
    <p>We appreciate your business at Baby Land.</p>
    <button class="btn" id="newOrderBtn">Place New Order</button>
  </section>
  
  <script>
    // Define the product codes array based on your provided list
    const productCodes = [
      "6761", "8691", "8923", "9247", "9290", "9364", "9407", "9450", "9493",
      "6991", "8707", "8934", "9248", "9291", "9365", "9408", "9451", "9494",
      "7025", "8708", "8935", "9249", "9292", "9366", "9409", "9452", "9495",
      "7127", "8713", "8945", "9250", "9293", "9367", "9410", "9453", "9496",
      "7247", "8717", "8948", "9251", "9294", "9368", "9411", "9454", "9497",
      "7334", "8718", "8950", "9252", "9295", "9369", "9412", "9455", "9498",
      "7418", "8721", "8951", "9253", "9296", "9370", "9413", "9456", "9499",
      "7419", "8723", "9187", "9254", "9297", "9371", "9414", "9457", "9500",
      "7557", "8729", "9188", "9255", "9298", "9372", "9415", "9458", "9501",
      "7575", "8731", "9189", "9256", "9299", "9373", "9416", "9459", "9502",
      "7577", "8732", "9190", "9257", "9300", "9374", "9417", "9460", "9503",
      "7578", "8733", "9191", "9258", "9301", "9375", "9418", "9461", "9504",
      "7579", "8735", "9192", "9259", "9302", "9376", "9419", "9462", "9505",
      "7581", "8737", "9193", "9260", "9303", "9377", "9420", "9463", "9506",
      "7583", "8738", "9194", "9261", "9304", "9378", "9421", "9464", "9507",
      "7584", "8748", "9196", "9262", "9305", "9379", "9422", "9465", "9508",
      "7637", "8757", "9198", "9263", "9306", "9380", "9423", "9466", "9509",
      "7638", "8760", "9221", "9264", "9307", "9381", "9424", "9467", "9510",
      "7639", "8779", "9222", "9265", "9308", "9382", "9425", "9468", "9511",
      "8088", "8782", "9223", "9266", "9309", "9383", "9426", "9469", "9512",
      "8224", "8790", "9224", "9267", "9310", "9384", "9427", "9470", "9513",
      "8291", "8791", "9225", "9268", "9311", "9385", "9428", "9471", "9514",
      "8394", "8792", "9226", "9269", "9312", "9386", "9429", "9472", "9515",
      "8402", "8793", "9227", "9270", "9329", "9387", "9430", "9473", "9516",
      "8412", "8795", "9228", "9271", "9330", "9388", "9431", "9474", "9517",
      "8413", "8809", "9229", "9272", "9331", "9389", "9432", "9475", "9518",
      "8414", "8813", "9230", "9273", "9332", "9390", "9433", "9476", "9519",
      "8415", "8814", "9231", "9274", "9333", "9391", "9434", "9477", "9520",
      "8416", "8815", "9232", "9275", "9341", "9392", "9435", "9478", "9521",
      "8420", "8816", "9233", "9276", "9342", "9393", "9436", "9479", "9522",
      "8421", "8817", "9234", "9277", "9343", "9394", "9437", "9480", "9523",
      "8422", "8818", "9235", "9278", "9344", "9395", "9438", "9481", "9524",
      "8424", "8825", "9236", "9279", "9345", "9396", "9439", "9482", "9525",
      "8428", "8827", "9237", "9280", "9346", "9397", "9440", "9483", "9526",
      "8429", "8828", "9238", "9281", "9347", "9398", "9441", "9484", "9527",
      "8442", "8902", "9239", "9282", "9348", "9399", "9442", "9485", "9528",
      "8443", "8908", "9240", "9283", "9358", "9400", "9443", "9486", "9529",
      "8444", "8911", "9241", "9284", "9359", "9401", "9444", "9487", "9530",
      "8454", "8912", "9242", "9285", "9360", "9402", "9445", "9488", "9531",
      "8479", "8913", "9243", "9286", "9361", "9403", "9446", "9489", "9532",
      "8500", "8918", "9244", "9287", "9362", "9404", "9447", "9490", "9533",
      "8688", "8919", "9245", "9288", "9363", "9405", "9448", "9491", "9534",
      "8690", "8920", "9246", "9289", "9364", "9406", "9449", "9492", "9535"
    ];

    const productContainer = document.getElementById('productContainer');
    let order = {};

    function updateOrder(productCode, quantity, card) {
      if (quantity > 0) {
        order[productCode] = quantity;
        card.classList.add('selected');
      } else {
        delete order[productCode];
        card.classList.remove('selected');
      }
    }

    function loadProducts() {
      productCodes.forEach(code => {
        const card = document.createElement('div');
        card.classList.add('product-card');
        card.dataset.code = code;

        const codeDisplay = document.createElement('div');
        codeDisplay.textContent = "Code " + code;
        codeDisplay.style.fontWeight = 'bold';
        codeDisplay.style.fontSize = '1.2em';
        card.appendChild(codeDisplay);

        const qtyInput = document.createElement('input');
        qtyInput.type = 'number';
        qtyInput.min = '0';
        qtyInput.value = '0';
        qtyInput.classList.add('qty-input');
        card.appendChild(qtyInput);

        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'Remove';
        removeBtn.classList.add('remove-btn');
        card.appendChild(removeBtn);

        qtyInput.addEventListener('change', () => {
          const quantity = parseInt(qtyInput.value) || 0;
          updateOrder(code, quantity, card);
        });

        removeBtn.addEventListener('click', () => {
          qtyInput.value = '0';
          updateOrder(code, 0, card);
        });

        productContainer.appendChild(card);
      });
    }
    loadProducts();

    const searchBar = document.getElementById('searchBar');
    searchBar.addEventListener('keyup', (e) => {
      const query = e.target.value.trim();
      if (query) {
        const foundCard = productContainer.querySelector(`[data-code="${query}"]`);
        if (foundCard) {
          foundCard.scrollIntoView({ behavior: "smooth", block: "center" });
          foundCard.style.border = "3px solid #FFD700";
          setTimeout(() => {
            foundCard.style.border = "";
          }, 2000);
        }
      }
    });

    function updateAllInputs() {
      document.querySelectorAll('.qty-input').forEach(input => {
        const card = input.parentElement;
        const code = card.dataset.code;
        const quantity = parseInt(input.value) || 0;
        updateOrder(code, quantity, card);
      });
    }

    const goSummaryBtn = document.getElementById('goSummary');
    const selectionSection = document.getElementById('selection-section');
    const summarySection = document.getElementById('summary-section');
    const orderTableBody = document.getElementById('orderTable').querySelector('tbody');
    const orderDetailsInput = document.getElementById('orderDetails');

    goSummaryBtn.addEventListener('click', () => {
      updateAllInputs();
      orderTableBody.innerHTML = '';
      for (const code in order) {
        if (order.hasOwnProperty(code)) {
          const row = document.createElement('tr');
          const codeCell = document.createElement('td');
          codeCell.textContent = "Code " + code;
          const qtyCell = document.createElement('td');
          qtyCell.textContent = order[code];
          row.appendChild(codeCell);
          row.appendChild(qtyCell);
          orderTableBody.appendChild(row);
        }
      }
      orderDetailsInput.value = JSON.stringify(order);
      selectionSection.style.display = 'none';
      summarySection.style.display = 'flex';
    });

    const backBtn = document.getElementById('backToSelection');
    backBtn.addEventListener('click', () => {
      summarySection.style.display = 'none';
      selectionSection.style.display = 'block';
    });

    const orderForm = document.getElementById('orderForm');
    orderForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const formData = new FormData(orderForm);
      fetch(orderForm.action, {
         method: 'POST',
         body: formData
      })
      .then(response => response.text())
      .then(data => {
         summarySection.style.display = 'none';
         document.getElementById('thankyou-section').style.display = 'flex';
      })
      .catch(error => {
         console.error("Error submitting form:", error);
         alert("Error submitting your order. Please try again.");
      });
    });

    const newOrderBtn = document.getElementById('newOrderBtn');
    newOrderBtn.addEventListener('click', () => {
      location.reload();
    });
  </script>
</body>
</html>
